!function(e){var r={};function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(r){return e[r]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(1),i=function(){function e(){}return e.run=function(){var e,r=document.querySelector("#main"),t={seqTime:function(e,r,t,n){r.uniform1f(e,1)},seqCode:function(e,r,t,n){r.uniform1i(e,32784)},sProg:function(e,r,t,n){r.uniform1f(e,.05)}};(e=new n.DR(r,"layout(location = 0) in vec2 pos; \n        out vec4 fragColor;                \n        void main() { \n            gl_Position = vec4(pos.xy,0.0,1.0);\n        }","uniform vec2 resolution;\n                uniform sampler2D A;\n               // uniform sampler2D B;                \n                out vec4 fragColor;\n                void main(){\n                    vec2 uv = gl_FragCoord.xy/resolution.xy;\n                    \n                    fragColor = texture(A, uv);\n                }")).aA({iChannel0:{src:"assets/iChannel0.png"},iChannel1:{src:"assets/iChannel1.png"},iChannel2:{src:"assets/iChannel2.jpg"}},function(){e.aB("A","layout(location = 0) in vec2 pos; \n        out vec4 fragColor;\n        void main() { \n            gl_Position = vec4(pos.xy,0.0,1.0);\n        }","uniform float time;\n        uniform vec2 resolution;\n                        \n        uniform float sT;\n        uniform int sC; // use for controlling , cb - controllBits(n)\n        uniform int sI;\n        uniform float sP;\n        \n        uniform sampler2D iChannel0;\n        uniform sampler2D iChannel1;\n        uniform sampler2D iChannel2;\n        \n        out vec4 fragColor;    \n        \n        void main(){\n        \n            vec2 uv = (-resolution.xy + 2. * gl_FragCoord.xy) / resolution.y;\n        \n            vec4 a = texture(iChannel0,uv);\n            vec4 b = texture(iChannel1,uv);\n            vec4 c = texture(iChannel2,uv);\n            \n            vec4 d = mix(b,a,0.5);\n        \n            fragColor = d ; //texture(iChannel2,uv);\n        \n        }",["iChannel0","iChannel1","iChannel2"]).run(0,t)})},e}();r.Example=i,setTimeout(function(){i.run()},3e3)},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r,t){this.a=e,this.b=r,this.textures=t,this.l=new Map,this.c=e}return e.prototype.swap=function(){var e=this.a;this.a=this.b,this.b=e},e}();r.CH=n;var i=function(){return function(e,r,t){this.framebuffer=e.createFramebuffer(),this.texture=e.createTexture(),this.renderBuffer=e.createRenderbuffer(),e.bindTexture(3553,this.texture),e.texImage2D(3553,0,6408,r,t,0,6408,5121,null),e.texParameteri(3553,10242,33071),e.texParameteri(3553,10243,33071),e.texParameteri(3553,10240,9728),e.texParameteri(3553,10241,9728),e.bindFramebuffer(36160,this.framebuffer),e.framebufferTexture2D(36160,36064,3553,this.texture,0),e.bindRenderbuffer(36161,this.renderBuffer),e.renderbufferStorage(36161,33189,r,t),e.framebufferRenderbuffer(36160,36096,36161,this.renderBuffer),e.bindTexture(3553,null),e.bindRenderbuffer(36161,null),e.bindFramebuffer(36160,null)}}();r.RT=i;var o=function(){function e(e,r,t){this.canvas=e,this.header="#version 300 es\n        #ifdef GL_ES\n                precision highp float;\n                precision highp int;\n                precision mediump sampler3D;\n        #endif\n        ",this.channels=new Map,this.programs=new Map,this.textureCache=new Map,this.gl=e.getContext("webgl2",{preserveDrawingBuffer:!0});var n,i=this.gl,o=0;for(var a in i)"function"==typeof i[a]&&(i[n=(n=(255&o++).toString(16)).match(/^[0-9].*$/)?"x"+n:n]=i[a]);if(i.viewport(0,0,e.width,e.height),this.buffer=i.createBuffer(),this.surfaceBuffer=i.createBuffer(),this.mainProgram=i.createProgram(),this.cS(this.mainProgram,35633,this.header+r),this.cS(this.mainProgram,35632,this.header+t),i.linkProgram(this.mainProgram),this.gl.validateProgram(this.mainProgram),!i.getProgramParameter(this.mainProgram,i.LINK_STATUS))throw"Could not compile WebGL program. \n\n"+i.getProgramInfoLog(this.mainProgram);i.useProgram(this.mainProgram),this.screenVertexPosition=i.getAttribLocation(this.mainProgram,"pos"),i.enableVertexAttribArray(this.screenVertexPosition),i.bindBuffer(34962,this.buffer),i.bufferData(34962,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),35044)}return e.prototype.cS=function(e,r,t){var n=this.gl,i=n.createShader(r);if(n.shaderSource(i,t),n.compileShader(i),n.attachShader(e,i),!this.gl.getShaderParameter(i,35713))throw this.gl.getShaderInfoLog(i).trim().split("\n").forEach(function(e){return console.error("[shader] "+e)}),new Error("Error while compiling vertex/fragment"+t)},e.prototype.aP=function(e){var r=this.gl.createProgram();return this.programs.set(e,r),r},e.prototype.t=function(e,r){var t=this.gl,n=t.createTexture();return t.activeTexture(r),t.bindTexture(3553,n),t.texImage2D(3553,0,6408,6408,5121,e),t.generateMipmap(3553),n},e.prototype.aA=function(e,r){var t=this,n=Object.keys(e).length;return Object.keys(e).forEach(function(i,o){var a=new Image;a.onload=function(e){t.textureCache.set(i,t.t(a,33984+o)),t.textureCache.size===n&&r()},a.src=e[i].src}),this},e.prototype.aB=function(e,r,t,n){var i=this,o=this.gl,a=this.cC(this.canvas.width,this.canvas.height,n||[]);this.channels.set(e,a);var u=this.aP(e);if(this.cS(u,35633,this.header+r),this.cS(u,35632,this.header+t),o.linkProgram(u),o.validateProgram(u),!o.getProgramParameter(u,o.LINK_STATUS))throw"Could not compile WebGL program. \n\n"+o.getProgramInfoLog(u);for(var f=o.getProgramParameter(u,o.ACTIVE_UNIFORMS),s=0;s<f;s++){var c=o.getActiveUniform(u,s);a.l.set(c.name,o.getUniformLocation(u,c.name))}return o.useProgram(u),n&&n.forEach(function(e,r){o.bindTexture(3553,i.textureCache.get(e))}),this.vertexPosition=o.getAttribLocation(u,"pos"),o.enableVertexAttribArray(this.vertexPosition),this},e.prototype.R=function(e,r){var t=this,n=this.gl,i=this.mainProgram,o=0;this.programs.forEach(function(i,a){n.useProgram(i);var u=t.channels.get(a);n.uniform2f(n.getUniformLocation(i,"resolution"),t.canvas.width,t.canvas.height),n.uniform1f(n.getUniformLocation(i,"time"),e),r&&Object.keys(r).forEach(function(t){r[t](n.getUniformLocation(i,t),n,i,e)}),u.textures.forEach(function(e){var r=n.getUniformLocation(i,e);n.uniform1i(r,o),o++}),n.bindBuffer(34962,t.surfaceBuffer),n.vertexAttribPointer(0,2,5126,!1,0,0),n.bindBuffer(34962,t.buffer),n.vertexAttribPointer(0,2,5126,!1,0,0),n.bindFramebuffer(36160,u.a.framebuffer),n.clear(16640),n.drawArrays(4,0,6)}),n.useProgram(i),n.uniform2f(n.getUniformLocation(i,"resolution"),this.canvas.width,this.canvas.height),n.uniform1f(n.getUniformLocation(i,"time"),e),n.bindBuffer(34962,this.buffer),n.vertexAttribPointer(0,2,5126,!1,0,0),this.channels.forEach(function(e,r){n.uniform1i(n.getUniformLocation(i,r),o),n.activeTexture(33984+o),n.bindTexture(3553,e.a.texture),o++,e.swap()}),n.bindFramebuffer(36160,null),n.clear(16640),n.drawArrays(4,0,6)},e.prototype.cC=function(e,r,t){var o=this.gl;return new n(new i(o,e,r),new i(o,e,r),t)},e.prototype.run=function(e,r){var t=this,n=performance.now(),i=0,o=function(e){requestAnimationFrame(o),(i=e-n)>1e3/60&&(n=e-i%(1e3/60),t.R(n/1e3,r))};return o(0|e),this},e}();r.DR=o}]);